#:kivy 1.8.0
#: import Window kivy.core.window.Window
#: import Factory kivy.factory.Factory


# Custom Header Tab Widget
<HeaderTab>:
    
    BoxLayout:
        orientation:"horizontal"
        
        canvas.before:
            Color:
                rgb: 0,0.5,0.5
            Rectangle:
                pos: self.pos
                size: self.width, 3
  
        Label:
            id:TabText
            text: root.TabText


<Main_Footer>:
    orientation:"horizontal"

    canvas:
        Color:
            rgb: 0.128,0.128,0.128
        Rectangle:
            size: self.size
            pos: self.pos

    Label:
        id:Footer_Label
        text: "Status"
        font_size:12


<Main_header>:
    orientation:"horizontal"

    canvas:
  
        Color:
            rgb: 0.128,0.128,0.128
        Rectangle:
            size: self.size
            pos: self.pos
            
    
    HeaderTab:
        size_hint_y:1
        size_hint_x:None
        width: 120
        on_press: root.use()
        

    #HeaderTab:
    #    size_hint_y:1
    #    size_hint_x:None
    #   width: 120

    Label:
        text:""
        size_hint_x: 1


    Button:
        id: Quit
        size_hint_x: 0.1
        text: "X"
        on_release: app.stop()



# - PROJECT MANAGEMENT RELATED UI (LEFT PANEL) - #

<Project_Search>:
    
    canvas.before:
        Color:
            rgb: 0.2,0.2,0.2
        Rectangle:
            size: self.size
            pos: self.pos
    
    Image:
        size_hint_x:0.4
        source:"search.png"
    
    SearchBar:
        padding:8
        text:""
        multiline: False

<Project_Manager>:
    orientation:"vertical"

    canvas.before:
        Color:
            rgb: 0.2,0.2,0.5
        Rectangle:
            pos:self.pos
            size:self.size

    Project_Search:
        size_hint_x: 1
        size_hint_y: None
        size:1, 33
    
    ScrollView:
        id: ScrollProjects
        Project_Display:
            id: ProjectDisplay
            padding:8





# - EDIT SCREEN (RIGHT PANEL) - #

<Edit_Screen>:
    id: Edit_Screen
    BoxLayout:
        orientation:"vertical"
        
        # 1 - INFO PROJET
        BoxLayout:
            orientation:"horizontal"
            size_hint_y: 0.6

            # Affichage projet
            BoxLayout:
                orientation:"vertical"                
                
                # NOM DU PROJET
                BoxLayout:
                    orientation:"horizontal"

                    Label:
                        size_hint_x:0.3
                        canvas.before:
                            Color:
                                rgb: 0.2,0.8,0.5
                            Rectangle:
                                pos:self.pos
                                size:self.size
                        text: "PROJET"
                    
                    Label:
                        id: Project_name_label
                        text:"Nom/ Eleves/ Chemin d'acces"

                # ETUDIANTS
                BoxLayout:
                    orientation:"horizontal"

                    Label:
                        size_hint_x:0.3
                        canvas.before:
                            Color:
                                rgb: 0.2,0.8,0.5
                            Rectangle:
                                pos:self.pos
                                size:self.size

                        text: "ETUDIANTS"
                    
                    Label:
                        id: Project_students_label
                
                # FICHIER
                BoxLayout:
                    orientation:"horizontal"

                    Label:
                        size_hint_x:0.3
                        canvas.before:
                            Color:
                                rgb: 0.2,0.8,0.5
                            Rectangle:
                                pos:self.pos
                                size:self.size

                        text: "SECTION"
                    
                    Label:
                        id: Project_path_label


            # Icone fichier
            Image:
                canvas.before:
                    Color:
                        rgb: 0.2,0.2,0.2
                    Rectangle:
                        pos:self.pos
                        size:self.size
                                
                size_hint_x:None
                size_hint_y:1
                height:20
                source:"Fast_text.png"      



        # 2 - NOTE + COMMENTAIRE
        
        BoxLayout:
            orientation:"vertical"
            
            BoxLayout:
                orientation:"horizontal"
                size_hint_x:1
                size_hint_y:0.2

                Label:
                    size_hint_x:1
                    size_hint_y:0.2
                    text:"Note"

                TextInput:
                    id: mark_input
                    size_hint_y:1
                    size_hint_x:0.3
                    multiline: False
                
                Label:
                    texte:""


            BoxLayout:
                orientation:"horizontal"
            
                Label:
                    text:"Commentaire"

                TextInput:
                    id: comm_input




        # 3 - TAGS
        Label:
            text:"Tag"



        # 4 - PREV / NEXT
        BoxLayout:
            height:30
            size_hint_y:None

            Button:
                size_hint_x:None
                width:dp(40)
                text:"<"
                on_release: root.select_previous_project()

            Label:
                
                text:"Prec/Suiv"

            Button:
                width:dp(40)
                size_hint_x:None
                text:">"
                on_release: root.select_next_project()

<Main_SM>:

    Edit_Screen:
        id: Edit_Screen
        size_hint_x:1
        size_hint_y:1


# - MAIN UI DESCRIPTION - #

<Main_body>:
    orientation: "vertical"
  
    Main_header:
        id:header
        size_hint_y:None
        size_hint_x:1
        size:50,50

    BoxLayout:
        
        canvas:
            Color:
                rgb: 0.2,0.2,0.2
            Rectangle:
                pos: self.pos
                size: self.size

        
        Project_Manager:
            id: Project_Manager
            pos:self.pos
            size:180,1
            size_hint_x:None
            size_hint_y:1


        Main_SM:
            id: main_sm
            size:10,10
            
    Main_Footer:
        id: main_footer
        size_hint_x: 1
        size_hint_y: None
        size:30,30


